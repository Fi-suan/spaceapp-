# AI Integration –¥–ª—è Agriculture Dashboard

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI GPT-3.5-turbo –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Backend (FastAPI)

**–§–∞–π–ª:** `back/app/services/ai_advisor.py`

- –ö–ª–∞—Å—Å `AIAdvisor` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ OpenAI API
- –ú–µ—Ç–æ–¥ `generate_agriculture_insights()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
  - `recommendations`: —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è —Ñ–µ—Ä–º–µ—Ä–æ–≤
  - `risk_alerts`: —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π —Å —É—Ä–æ–≤–Ω—è–º–∏ —Ä–∏—Å–∫–∞ (critical/warning/info)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI:**
```json
{
  "recommendations": [
    "recommendation 1",
    "recommendation 2",
    "recommendation 3"
  ],
  "risk_alerts": [
    {
      "level": "critical",
      "message": "alert message"
    },
    {
      "level": "warning",
      "message": "alert message"
    }
  ]
}
```

### 2. API Endpoint

**–§–∞–π–ª:** `back/app/api/dashboard_sections.py`

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/dashboard/agriculture` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `recommendations`: AI-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- `risk_alerts`: AI-–æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏

### 3. Frontend (Next.js)

**–§–∞–π–ª:** `front/src/app/dashboard/farm/page.tsx`

–î–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∞:
- **AI Recommendations** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å –∑–µ–ª–µ–Ω—ã–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏
- **AI Risk Alerts** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π:
  - üî¥ Critical (–∫—Ä–∞—Å–Ω—ã–π)
  - üü° Warning (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
  - üîµ Info (—Å–∏–Ω–∏–π)

## –ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç AI

AI –ø–æ–ª—É—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
- –¢–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- –†–∏—Å–∫ –∑–∞–º–æ—Ä–æ–∑–∫–æ–≤ (–ø—Ä–æ—Ü–µ–Ω—Ç –∏ —Å—Ç–∞—Ç—É—Å)
- –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞ (PM2.5)
- –í–ª–∞–∂–Ω–æ—Å—Ç—å
- –û—Å–∞–¥–∫–∏
- –°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞
- 7-–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã

## –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

AI –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç-–∞–≥—Ä–æ–Ω–æ–º –∏ –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∏—Å–∫–∏ (–∑–∞–º–æ—Ä–æ–∑–∫–∏, –æ—Å–∞–¥–∫–∏, –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞, —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã)
- –û—Ç–≤–µ—á–∞–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

## Fallback —Å–∏—Å—Ç–µ–º–∞

–ï—Å–ª–∏ AI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–ø–∞—Å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
- –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## API Key

–ö–ª—é—á OpenAI –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–µ–Ω –≤ `ai_advisor.py`:
```python
ai_advisor = AIAdvisor(api_key="sk-proj-nVt8SxPLUeuKmVDDIx6TT3BlbkFJLwUst1mfQjpMkYm5rBnQ")
```

‚ö†Ô∏è **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—Ä–æ—Å –∫ API:
```bash
GET /dashboard/agriculture?city_id=moscow
```

### –û—Ç–≤–µ—Ç:
```json
{
  "current_temperature": 15.2,
  "frost_risk": {...},
  "recommendations": [
    "Apply frost protection measures to sensitive crops",
    "Monitor soil moisture due to low precipitation",
    "Consider delaying outdoor work due to moderate air quality"
  ],
  "risk_alerts": [
    {
      "level": "critical",
      "message": "High frost risk (65%). Protect vulnerable plants."
    }
  ]
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ AI: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GPT-3.5-turbo (–±—ã—Å—Ç—Ä—ã–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–π)
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 0.7 (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é)
- Max tokens: 500

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –∫—É–ª—å—Ç—É—Ä
5. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ GPT-4 –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
